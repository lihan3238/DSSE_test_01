<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Interaction</title>
    <script>
        { {/*  const SERVER_URL = "http://127.0.0.1:8080"; // 后端服务器地址  */ } }
        async function setupData() {
            await fetch('http://127.0.0.1:8080/setup', { method: 'POST' });
            alert('Client Data Setup Complete');
        }

        async function connectServer() {
            const updateFile = prompt("请输入更新文件名:");
            if (!updateFile) return;

            await fetch('http://127.0.0.1:8080/connect', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ update_file: updateFile })
            });
            alert('Server Connection Updated');
        }

        async function search() {
            const wordCount = prompt("输入要搜索的词数量:");
            if (!wordCount) return;

            const searchType = prompt("输入搜索类型（disjunctive, conjunctive）:");
            if (!searchType) return;

            let words = [];
            for (let i = 0; i < wordCount; i++) {
                let word = prompt(`输入第 ${i + 1} 个单词:`);
                words.push(word);
            }

            const startIndex = prompt("输入起始索引:");
            const endIndex = prompt("输入终止索引:");

            await fetch('http://127.0.0.1:8080/search', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    word_count: parseInt(wordCount),
                    search_type: searchType,
                    words: words,
                    start_index: parseInt(startIndex),
                    end_index: parseInt(endIndex)
                })
            });

            alert('Search Request Sent');
        }
    </script>
</head>

<body>
    <h1>Client 操作界面</h1>
    <button onclick="setupData()">设置客户端数据</button>
    <button onclick="connectServer()">连接服务器</button>
    <button onclick="search()">搜索</button>
</body>

</html>